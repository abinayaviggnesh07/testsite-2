<!DOCTYPE html>
<html>
<head>
  <meta name="facebook-domain-verification" content="qowrhpyni79cf2pms3zixyrxoh3b4" />
  <title>Pixel Error Test Page</title>
  <script>
    // Facebook Pixel Base Code
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '886311714113663'); // Replace with your actual Pixel ID
    fbq('track', 'PageView');
    fbq('track', 'InvalidEvent'); // This will generate a Pixel error
    fbq(); // This will trigger FBQ_NO_METHOD_NAME error
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"
    />
  </noscript>
</head>
<body>
  <h2>Pixel Error Test Page</h2>
  <div>
    <ul>
      <li><button id="addToWishlistButton" type="button">Add to Wishlist</button></li>
      <li><button id="addToCartButton" type="button">Add to Cart</button></li>
      <li><button id="checkoutButton" type="button">Check Out</button></li>
      <li><button id="purchaseButton" type="button">Purchase</button></li>
      <li><button id="subcribeButton" type="button">Subscribe</button></li>
      <li><button id="registrationButton" type="button">Registration</button></li>
    </ul>
  </div>
  <script type="text/javascript">
    // Reusable function for event tracking with error handling
    function addEventListenerWithTracking(elementId, eventName) {
      try {
        const element = document.getElementById(elementId);
        if (element) {
          element.addEventListener('click', function() {
            fbq('track', eventName);
          }, false);
        } else {
          console.error(`Element with id ${elementId} not found`);
        }
      } catch (error) {
        console.error(`Error adding event listener to ${elementId}: ${error.message}`);
      }
    }
    // Special handler for Purchase event (with value and currency)
    function addPurchaseEventListener() {
      try {
        const purchaseButton = document.getElementById('purchaseButton');
        if (purchaseButton) {
          purchaseButton.addEventListener('click', function() {
            fbq('track', 'Purchase', {
              value: 100,
              currency: 'USD',
            });
          }, false);
        } else {
          console.error('Purchase button not found');
        }
      } catch (error) {
        console.error(`Error adding purchase event listener: ${error.message}`);
      }
    }
    // Add listeners for all buttons
    addEventListenerWithTracking('addToWishlistButton', 'AddToWishlist');
    addEventListenerWithTracking('addToCartButton', 'AddToCart');
    addEventListenerWithTracking('checkoutButton', 'InitiateCheckout');
    addPurchaseEventListener();
    addEventListenerWithTracking('subcribeButton', 'Subscribe');
    addEventListenerWithTracking('registrationButton', 'CompleteRegistration');
    // Introduce a JavaScript error for testing
    var undefinedVariable;
    console.log(undefinedVariable.property); // This will throw an error
  </script>
</body>
</html>
